<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<<<<<<< Updated upstream
    <meta charset="UTF-8">
    <title th:text="${title}">Light Novel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
    <div class="container">
        <a class="navbar-brand fw-bold" th:href="@{/DustNovel/home}">
            ğŸ“š LN Web
        </a>
        <button class="navbar-toggler" type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container my-4">
    <div th:replace="${content} :: content"></div>
=======
<meta charset="UTF-8">
<title th:text="${title}">DustNovel</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" th:href="@{/css/theme.css}">

<style>
/* ===== THEME TOGGLE SWITCH ===== */
.theme-switch {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	padding: 10px 14px;
}

.theme-switch span {
	font-size: 13px;
}

.switch {
	position: relative;
	width: 44px;
	height: 24px;
}

.switch input {
	opacity: 0;
	width: 0;
	height: 0;
}

.slider {
	position: absolute;
	inset: 0;
	background: #ddd;
	border-radius: 999px;
	transition: .3s;
}

.slider:before {
	content: "â˜€ï¸";
	position: absolute;
	width: 20px;
	height: 20px;
	left: 2px;
	top: 2px;
	background: white;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 12px;
	transition: .3s;
}

input:checked+.slider {
	background: #2b2b2b;
}

input:checked+.slider:before {
	transform: translateX(20px);
	content: "ğŸŒ™";
}

/* Light */
.theme-label {
	color: #212529;
}

/* Dark */
[data-theme="dark"] .theme-label {
	color: #f1f1f1;
}

/* ===== FONT ===== */
body {
	font-size: 14px;
}

.navbar {
	font-size: 14px;
}

.navbar-brand span {
	font-size: 16px;
}

/* ===== THE LOAI ===== */
.theloai-dropdown {
	left: 50% !important;
	transform: translateX(-50%);
	width: 1100px;
	max-width: 90vw;
	max-height: 300px;
	overflow-y: auto;
	column-count: 7;
	padding: 20px;
}

.theloai-dropdown .dropdown-item {
	white-space: normal;
	padding: 6px 12px;
	font-size: 13px;
}

/* ===== SEARCH ===== */
.search-input {
	width: 220px;
	font-size: 13px;
}
</style>
</head>

<body data-theme="light">

	<nav
		class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
		<div class="container">

			<a class="navbar-brand fw-bold d-flex align-items-center"
				th:href="@{/DustNovel/home}"> <img th:src="@{/images/logo.png}"
				height="36" class="me-2"> <span>DustNovel</span>
			</a>

			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarNav">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarNav">

				<ul class="navbar-nav me-3">
					<li class="nav-item"><a class="nav-link"
						th:href="@{/DustNovel/themtruyen}">â• ThÃªm truyá»‡n</a></li>

					<li class="nav-item dropdown position-static"><a
						class="nav-link dropdown-toggle" href="#"
						data-bs-toggle="dropdown"> ğŸ“š Thá»ƒ loáº¡i </a>
						<ul class="dropdown-menu theloai-dropdown">
							<li th:each="tl : ${theLoais}"><a class="dropdown-item"
								th:href="@{/DustNovel/the-loai/{id}(id=${tl.id})}"
								th:text="${tl.tenTheLoai}"> </a></li>
						</ul></li>

					<li class="nav-item"><a class="nav-link"
						th:href="@{/DustNovel/nap-tien}">ğŸ’° Náº¡p tiá»n</a></li>
					<li class="nav-item"><a class="nav-link"
						th:href="@{/DustNovel/guild}">ğŸ›¡ï¸ Guild</a></li>
				</ul>

				<form class="d-flex ms-auto me-3"
					th:action="@{/DustNovel/truyen/tim-kiem}" method="get">
					<input class="form-control search-input me-2" type="search"
						name="keyword" placeholder="TÃ¬m truyá»‡n...">
					<button class="btn btn-outline-primary btn-sm">ğŸ”</button>
				</form>

				<ul class="navbar-nav">

					<div sec:authorize="isAnonymous()">
						<a th:href="@{/DustNovel/login}" class="ms-1 text-decoration-none">
							ÄÄƒng nháº­p </a>
					</div>

					<div class="dropdown d-flex align-items-center gap-2"
						sec:authorize="isAuthenticated()">

						<span class="hello-user"> Xin chÃ o, <span
							sec:authentication="name"></span>
						</span>

						<button class="btn p-0 border-0 rounded-circle overflow-hidden"
							type="button" data-bs-toggle="dropdown"
							style="width: 42px; height: 42px">

							<!-- CÃ“ AVATAR -->
							<img th:if="${user != null and user.avatar != null}"
								th:src="@{${user.avatar}}"
								style="width: 100%; height: 100%; object-fit: cover">

							<!-- FALLBACK CHá»® -->
							<span th:if="${user == null or user.avatar == null}"
								class="d-flex align-items-center justify-content-center bg-secondary text-white fw-bold"
								style="width: 100%; height: 100%;"> <span
								th:text="${#strings.toUpperCase(#strings.substring(#authentication.name,0,1))}"></span>
							</span>

						</button>


						<!-- DROPDOWN MENU -->
						<ul class="dropdown-menu dropdown-menu-end shadow-sm">

							<li><a class="dropdown-item"
								th:href="@{/DustNovel/user/profile}"> ğŸ‘¤ TÃ i khoáº£n </a></li>

							<li><a class="dropdown-item"
								th:href="@{/DustNovel/user/history}"> ğŸ•˜ Lá»‹ch sá»­ </a></li>

							<li><a class="dropdown-item"
								th:href="@{/DustNovel/user/bookmark}"> ğŸ”– ÄÃ¡nh dáº¥u </a></li>

							<li><a class="dropdown-item"
								th:href="@{/DustNovel/user/message}"> âœ‰ï¸ Tin nháº¯n </a></li>

							<li>
								<div class="theme-switch">
									<span class="theme-label">Giao diá»‡n</span> <label
										class="switch"> <input type="checkbox"
										id="themeToggle"> <span class="slider"></span>
									</label>
								</div>
							</li>

							<li><a class="dropdown-item" th:href="@{/DustNovel/system}">
									âš™ï¸ Há»‡ thá»‘ng </a></li>

							<li><hr class="dropdown-divider"></li>

							<li><a class="dropdown-item text-danger"
								th:href="@{/DustNovel/logout}"> ğŸšª ThoÃ¡t </a></li>

						</ul>
					</div>

				</ul>
			</div>
		</div>
	</nav>

	<div class="container my-4">
		<div th:replace="${content} :: content"></div>
	</div>

	<footer class="text-center py-2 border-top">
		<small>Â© 2025 - DustNovel</small>
	</footer>

	<script>
const toggle = document.getElementById("themeToggle");

function applyTheme(theme) {
    document.body.setAttribute("data-theme", theme);
    localStorage.setItem("theme", theme);
    toggle.checked = theme === "dark";
}

toggle.addEventListener("change", () => {
    applyTheme(toggle.checked ? "dark" : "light");
});

(function () {
    const saved = localStorage.getItem("theme") || "light";
    applyTheme(saved);
})();

//Báº¥m chuyá»ƒn sÃ¡ng tá»‘i Dropdown khÃ´ng bá»‹ Ä‘Ã³ng
document.querySelectorAll('.theme-switch').forEach(el => {
    el.addEventListener('click', function (e) {
        e.stopPropagation();
    });
});
</script>
>>>>>>> Stashed changes

</div>
<footer class="bg-light text-center py-3 border-top">
    <small>&copy; 2025 - Light Novel Project</small>
</footer>
</body>
</html>
